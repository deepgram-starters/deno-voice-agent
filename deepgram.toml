[meta]
title = "Deno Voice Agent"
description = "Get started using Deepgram's Voice Agent with this Deno demo app"
author = "Deepgram DX Team <devrel@deepgram.com> (https://developers.deepgram.com)"
repository = "https://github.com/deepgram-starters/deno-voice-agent"
useCase = "voice-agent"
language = "TypeScript"
framework = "Deno"
sdk = "N/A"

[install.pre]
command = "git submodule update --init --recursive"
message = "Submodules initialized"

[install]
command = ["deno task cache", "cd frontend && corepack pnpm install"]
message = "Dependencies installed"

[install.config]
sample = "sample.env"
output = ".env"

[build]
command = "cd frontend && corepack pnpm build"
message = "Frontend built"

[check]
command = ["command -v git", "command -v deno", "command -v pnpm"]
message = "Prerequisites checked"

[start.pre]
command = ["test -f .env || echo 'Error: .env file not found'", "test -d frontend/.git || echo 'Error: Frontend submodule not initialized'"]
message = "Pre-flight checks complete"

[start]
command = ["deno run --allow-net --allow-read --allow-env --watch server.ts", "cd frontend && corepack pnpm run dev -- --port 8080 --no-open"]
parallel = true
message = "Application running on http://localhost:8080"

[clean]
command = ["rm -rf frontend/node_modules", "rm -rf frontend/dist"]
message = "Build artifacts cleaned"
